<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ajouter un Pays</title>
    <script src="./assets/1-ajouter-objet.js" type="module"></script>
    <link rel="stylesheet" href="./assets/pays.css" />
  </head>
  <body>
    <header>
      <h1 id="titre">Titre à remplacer</h1>
    </header>

    <main>
      <form>
        <div>
          <label for="codePays">Code Pays</label>
          <input id="codePays" name="code_pays" type="text" required
          placeholder="Code Pays"
        </div>

        <div>
          <label for="nomPays">Nom du Pays</label>
          <input id = "nomPays" name = "nom_pays" type = "text" required
          placeholder = "Nom du Pays"
        </div>

        <div id="next">
          <button id="validate">Ajouter</button>
        </div>

        <div id="result">
          <!-- Afficher ici les erreurs de saisie ou le résultat si la siasie est correcte -->
        </div>
      </form>
    </main>
  </body>
</html>


// const monTitre = document.querySelector('#titre');


const monTitre = document.getElementById('titre'); // plus rapide que querySelector
const monBouton = document.getElementById('validate');
const inputCodePays = document.getElementById("codePays");
const inputNomPays = document.getElementById("nomPays");
const divResult = document.getElementById("result");

const regexNomPays = /[a-zA-Z]{4,}/;


// Modifier le titre
monTitre.textContent = 'Ajouter un pays';

// ajouter un évènement au bouton de recherche

/*monBouton.onclick = () => {

}*/

monBouton.addEventListener('click', (event) => {
   event.preventDefault();
   divResult.textContent = '';

   let codePays = inputCodePays.value;
   let nomPays = inputNomPays.value;

   try {
        // Si le code pays ne contient pas exactement 2 caractères
        if(codePays.length != 2) { 
            throw new Error('Le code pays doit contenir exactement 2 caractères');
        }
        // Si le format du nom du pays ne correspond pas à la regex regexNomPays
        if(!regexNomPays.test(nomPays)) { 
            throw new Error('Le nom du pays doit contenir au moins 4 lettres.')
        }

        // On met le code pays en majuscules
        codePays = codePays.toUpperCase();

        // Récupération de la 1ère lettre du nom du pays
        // let premiereLettre = nomPays.substr(0, 1); // incorrect car déprécié.
        //let premiereLettre = nomPays.charAt(0);
        //let premiereLettre = nomPays.slice(0, 1);
        let premiereLettre = nomPays.substring(0, 1).toUpperCase();
        // Récupération du nom du pays sauf la 1ère lettre
        let lettresRestantes = nomPays.slice(1).toLowerCase();
        // Formattage du nom du pays
        nomPays = premiereLettre + lettresRestantes;
        // nomPays = nomPays.charAt(0).toUpperCase() + nomPays.slice(1).toLowerCase();

        let nouveauPays = {
            country_code: codePays,
            country_name: nomPays
        }

   } 
   catch(error) {
        console.log(error);
        divResult.textContent = error;
   }

   
});

import { Pays } from './pays.js';

const monTitre = document.getElementById('titre'); // plus rapide que querySelector
const monBouton = document.getElementById('validate');
const inputCodePays = document.getElementById("codePays");
const inputNomPays = document.getElementById("nomPays");
const divResult = document.getElementById("result");

// Modifier le titre
monTitre.textContent = 'Ajouter un pays';

monBouton.addEventListener('click', (event) => {
    event.preventDefault();
    divResult.textContent = '';
 
    let codePays = inputCodePays.value;
    let nomPays = inputNomPays.value;

    try {
        let monPays = new Pays(codePays, nomPays);
    } 
    catch(error) {
        console.error(error);
        divResult.textContent = error;
    }
});


export class Pays 
{
    static regexNomPays = /^[a-zA-Z]{4,}$/;

    constructor(codePays, nomPays) {
        
        if(codePays.length != 2) { 
            throw new Error('Le code pays doit contenir exactement 2 caractères');
        }

        if(!Pays.regexNomPays.test(nomPays)) { 
            throw new Error('Le nom du pays ne doit contenir que des lettres et doit contenir au moins 4 lettres.')
        }

        this.codePays = codePays.toUpperCase();
        this.nomPays = nomPays.charAt(0).toUpperCase() + nomPays.slice(1).toLowerCase();
    }
}


:root {
    --color1: darkblue;
    --color2: yellow;
    --color3: darkorange;
    --color4: lightcyan;
    --color5: darkgrey;
    --color6: #FFFFFF33;
  }
  
  * {
    box-sizing: border-box;
  }
  
  html {
    font-size: 62.5%;
  }
  
  body {
    font-size: 1.6 rem;
    font-family: Verdana, Geneva, Tahoma, sans-serif;
    margin: 0;
    padding: 0;
    background: var(--color1);
    color: var(--color2)
  }
  
  .rouge{
    color:red;
  }
  



  <!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajouter un Pays</title>
    <script src="./assets/2-gerer-objet.js" type="module"></script>
</head>
<body>
    <header>
        <h1>Mes 2 pays</h1>
    </header>
    <main id="principal">
        
    </main>
</body>
</html>


// Utiliser un objet littéral existant
const laFrance = {
    "country_code": "FR",
    "country_name": "France"
}

console.log(laFrance);
